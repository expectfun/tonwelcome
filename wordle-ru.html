<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Словарь - Русский Wordle</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --bg-color: #ffffff;
            --text-color: #1a1a1b;
            --key-bg: #d3d6da;
            --key-text: #1a1a1b;
            --border-color: #d3d6da;
            --empty-border: #878a8c;
            --correct: #6aaa64;
            --present: #c9b458;
            --absent: #787c7e;
            --header-bg: #ffffff;
            --modal-bg: #ffffff;
        }

        .dark-theme {
            --bg-color: #121213;
            --text-color: #ffffff;
            --key-bg: #818384;
            --key-text: #ffffff;
            --border-color: #3a3a3c;
            --empty-border: #565758;
            --correct: #538d4e;
            --present: #b59f3b;
            --absent: #3a3a3c;
            --header-bg: #121213;
            --modal-bg: #1a1a1b;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            transition: background-color 0.3s, color 0.3s;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 16px;
            border-bottom: 1px solid var(--border-color);
            background: var(--header-bg);
        }

        .title {
            font-size: 24px;
            font-weight: bold;
            letter-spacing: 2px;
        }

        .mode-toggle {
            display: flex;
            gap: 8px;
        }

        .mode-btn {
            padding: 8px 12px;
            border: none;
            border-radius: 8px;
            background: var(--key-bg);
            color: var(--key-text);
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .mode-btn.active {
            background: var(--correct);
            color: white;
        }

        .game-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between;
            padding: 10px;
            max-width: 500px;
            margin: 0 auto;
            width: 100%;
        }

        .board {
            display: grid;
            grid-template-rows: repeat(6, 1fr);
            gap: 5px;
            padding: 10px;
            flex-grow: 1;
            max-height: 400px;
        }

        .row {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 5px;
        }

        .tile {
            width: 58px;
            height: 58px;
            border: 2px solid var(--border-color);
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 32px;
            font-weight: bold;
            text-transform: uppercase;
            transition: transform 0.1s, background-color 0.3s;
        }

        .tile.filled {
            border-color: var(--empty-border);
            animation: pop 0.1s;
        }

        .tile.correct {
            background-color: var(--correct);
            border-color: var(--correct);
            color: white;
        }

        .tile.present {
            background-color: var(--present);
            border-color: var(--present);
            color: white;
        }

        .tile.absent {
            background-color: var(--absent);
            border-color: var(--absent);
            color: white;
        }

        .tile.reveal {
            animation: flip 0.5s ease forwards;
        }

        @keyframes pop {
            50% { transform: scale(1.1); }
        }

        @keyframes flip {
            0% { transform: rotateX(0); }
            50% { transform: rotateX(90deg); }
            100% { transform: rotateX(0); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            20%, 60% { transform: translateX(-5px); }
            40%, 80% { transform: translateX(5px); }
        }

        .shake {
            animation: shake 0.5s;
        }

        .keyboard {
            padding: 8px;
            width: 100%;
            max-width: 500px;
        }

        .keyboard-row {
            display: flex;
            justify-content: center;
            gap: 4px;
            margin-bottom: 6px;
        }

        .key {
            height: 50px;
            min-width: 28px;
            padding: 0 8px;
            border: none;
            border-radius: 4px;
            background: var(--key-bg);
            color: var(--key-text);
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            text-transform: uppercase;
            transition: background-color 0.2s;
            -webkit-user-select: none;
            user-select: none;
        }

        .key:active {
            transform: scale(0.95);
        }

        .key.wide {
            min-width: 50px;
            font-size: 12px;
        }

        .key.correct {
            background-color: var(--correct);
            color: white;
        }

        .key.present {
            background-color: var(--present);
            color: white;
        }

        .key.absent {
            background-color: var(--absent);
            color: white;
        }

        .message {
            position: fixed;
            top: 80px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--text-color);
            color: var(--bg-color);
            padding: 12px 20px;
            border-radius: 8px;
            font-weight: bold;
            z-index: 100;
            opacity: 0;
            transition: opacity 0.3s;
            pointer-events: none;
        }

        .message.show {
            opacity: 1;
        }

        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 200;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
        }

        .modal-overlay.show {
            opacity: 1;
            pointer-events: auto;
        }

        .modal {
            background: var(--modal-bg);
            padding: 24px;
            border-radius: 16px;
            text-align: center;
            max-width: 320px;
            width: 90%;
            transform: scale(0.9);
            transition: transform 0.3s;
        }

        .modal-overlay.show .modal {
            transform: scale(1);
        }

        .modal h2 {
            margin-bottom: 16px;
            font-size: 24px;
        }

        .modal p {
            margin-bottom: 12px;
            font-size: 16px;
        }

        .modal .word {
            font-size: 28px;
            font-weight: bold;
            color: var(--correct);
            margin: 16px 0;
            letter-spacing: 4px;
        }

        .modal-btn {
            margin-top: 16px;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            background: var(--correct);
            color: white;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
        }

        .stats {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 16px 0;
        }

        .stat {
            text-align: center;
        }

        .stat-value {
            font-size: 32px;
            font-weight: bold;
        }

        .stat-label {
            font-size: 12px;
            color: var(--empty-border);
        }

        .info-text {
            font-size: 12px;
            color: var(--empty-border);
            margin-top: 8px;
        }

        .hidden-input {
            position: absolute;
            left: -9999px;
            opacity: 0;
            width: 1px;
            height: 1px;
        }

        .tap-hint {
            text-align: center;
            padding: 8px;
            font-size: 14px;
            color: var(--empty-border);
            cursor: pointer;
        }

        .tap-hint.hidden {
            display: none;
        }

        @media (max-width: 400px) {
            .tile {
                width: 52px;
                height: 52px;
                font-size: 28px;
            }
            .key {
                height: 45px;
                min-width: 24px;
                font-size: 12px;
            }
            .title {
                font-size: 20px;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="title">СЛОВАРЬ</div>
        <div class="mode-toggle">
            <button class="mode-btn active" id="dailyBtn" onclick="setMode('daily')">Слово дня</button>
            <button class="mode-btn" id="randomBtn" onclick="setMode('random')">Случайное</button>
        </div>
    </header>

    <div class="game-container">
        <input type="text" id="hiddenInput" class="hidden-input" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" inputmode="text" lang="ru">
        <div class="board" id="board" onclick="focusInput()"></div>
        <div class="tap-hint" id="tapHint" onclick="focusInput()">Нажмите, чтобы открыть клавиатуру</div>
        <div class="keyboard" id="keyboard"></div>
    </div>

    <div class="message" id="message"></div>

    <div class="modal-overlay" id="modalOverlay">
        <div class="modal">
            <h2 id="modalTitle">Победа!</h2>
            <p id="modalText">Вы угадали слово!</p>
            <div class="word" id="modalWord"></div>
            <div class="stats">
                <div class="stat">
                    <div class="stat-value" id="statPlayed">0</div>
                    <div class="stat-label">Игр</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="statWon">0</div>
                    <div class="stat-label">Побед</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="statStreak">0</div>
                    <div class="stat-label">Серия</div>
                </div>
            </div>
            <button class="modal-btn" id="modalBtn" onclick="closeModal()">Играть снова</button>
            <p class="info-text" id="nextWordInfo"></p>
        </div>
    </div>

    <script>
        // Russian 5-letter nouns dictionary (~2000 words)
        const WORDS = [
            // А
            "абзац", "аборт", "абрис", "авиаа", "автор", "агент", "адрес", "азарт", "азиат", "аккат",
            "аксон", "актер", "актив", "акула", "акция", "алмаз", "алтын", "альфа", "ампер", "анализ",
            "ангар", "ангел", "анонс", "апрел", "аргон", "арена", "аренд", "армия", "аромат", "артист",
            "архив", "аршин", "аспект", "астма", "атака", "атлас", "атлет", "афера", "афиша",
            // Б
            "бабка", "багаж", "багет", "багор", "базар", "базис", "байка", "балка", "балет", "балка",
            "банан", "банда", "банка", "барак", "баран", "барин", "барон", "басня", "батон", "башка",
            "башня", "бегун", "бедро", "бездна", "белка", "белок", "берег", "берет", "беседа", "бетон",
            "бизон", "бинокл", "бинт", "битва", "благо", "блеск", "блоха", "блуза", "блюдо", "бобер",
            "бодка", "болт", "борец", "борт", "борщ", "босяк", "ботва", "бочка", "бояре", "бравада",
            "брань", "брасс", "браток", "бревно", "бредни", "бремя", "бриз", "броня", "бровь", "бронх",
            "брошь", "брюки", "бубен", "бугор", "будка", "букет", "буксир", "бульон", "бумага", "бунт",
            "буран", "бурят", "бутон", "бутыль", "буфер", "буфет", "бухта", "бушел", "быков", "бытие",
            // В
            "вагон", "важность", "ванна", "ванная", "варан", "варка", "ватка", "вафля", "вахта", "введение",
            "вдова", "ведра", "ведро", "ведущ", "веер", "вежда", "везение", "вексел", "велик", "вельвет",
            "вена", "венец", "веник", "венка", "венок", "вепрь", "верба", "верблюд", "верещ", "верфь",
            "верх", "весло", "весна", "весть", "ветвь", "ветер", "вечер", "вещи", "вещь", "взвод",
            "взгляд", "взлет", "взмах", "взнос", "взрыв", "видео", "вилка", "вилла", "вина", "винт",
            "виола", "вираж", "вирус", "виски", "висок", "витка", "витраж", "вихрь", "вишня", "вклад",
            "вкус", "влага", "власт", "влечение", "вмятин", "внук", "внучка", "вобла", "вода", "водка",
            "вождь", "возня", "война", "войск", "вокзал", "волан", "волк", "волна", "волос", "вольт",
            "вопль", "вопрос", "ворон", "ворот", "ворох", "ворс", "восток", "восход", "впадин", "враг",
            "врач", "время", "всход", "вуаль", "вулкан", "вход", "выбор", "вывих", "вывод", "выгод",
            "выдра", "вызов", "выпад", "выпуск", "высота", "выход", "вьюга", "вязка", "вятич",
            // Г
            "газел", "газета", "газон", "гайка", "галера", "галка", "галоп", "гамак", "гамма", "гараж",
            "гарем", "гармонь", "гарнир", "гарпун", "гвоздь", "гейша", "гелий", "генерал", "гений", "герань",
            "герб", "гербарий", "герой", "гибель", "гигант", "гид", "гильза", "гимн", "гипноз", "гипс",
            "гитара", "глава", "глагол", "гладь", "глаз", "глина", "глист", "глобус", "глотка", "глубь",
            "глупец", "глушь", "глыба", "гнев", "гнездо", "гном", "гобой", "говор", "год", "голень",
            "голова", "голод", "голос", "голубь", "гонец", "гонка", "гопак", "гора", "горб", "горе",
            "горечь", "горло", "город", "горох", "горсть", "гость", "готика", "гофр", "грабеж", "граблей",
            "грамм", "гранат", "грань", "график", "грач", "греб", "грелка", "грех", "гриб", "грива",
            "гризли", "гриль", "грим", "грипп", "гроб", "гроза", "гром", "грот", "грохот", "грубость",
            "груда", "грудь", "груз", "группа", "грусть", "груша", "грыжа", "грязь", "губа", "губка",
            "гудок", "гулянь", "гумно", "гурман", "гусак", "густь", "гусыня", "гуща",
            // Д
            "давка", "дайка", "далье", "дамба", "дамка", "данже", "данник", "дань", "датчик", "дача",
            "дверь", "двоек", "двойка", "дворец", "дебет", "дебош", "дебри", "дебют", "девиз", "девка",
            "девятка", "дед", "дедка", "дежурка", "декан", "декор", "делец", "дело", "дельта", "демон",
            "денек", "день", "депо", "дерби", "дерево", "дерзость", "дерн", "десант", "десерт", "десна",
            "десть", "деталь", "детвора", "детка", "детище", "дефект", "дефис", "джаз", "джем", "джин",
            "джинн", "джип", "джунг", "диван", "дизель", "дикарь", "диктат", "дилер", "динар", "динго",
            "диод", "диоксид", "диплом", "диск", "дичь", "длань", "длина", "дневник", "днище", "добро",
            "добыч", "довод", "догма", "дождь", "дозор", "дойка", "доклад", "доктор", "долг", "долина",
            "доля", "домен", "домик", "домна", "донор", "донос", "допинг", "дорога", "доска", "досуг",
            "досье", "доход", "дочка", "дочь", "дошка", "дояра", "дрань", "драка", "драма", "древо",
            "дрейф", "дрель", "дремота", "дробь", "дрова", "дрозд", "дрожжи", "дрожь", "друг", "друза",
            "дубина", "дуга", "дудка", "дужка", "дукат", "дума", "дупло", "дурак", "дурень", "дурман",
            "дуршлаг", "дуст", "дутье", "дух", "душа", "душка", "дуэль", "дуэт", "дщерь", "дыба",
            "дымка", "дыня", "дырка", "дюжина", "дюйм", "дюна", "дятел",
            // Е
            "евнух", "египтянин", "егоза", "едина", "единство", "едок", "ежата", "ежик", "езда", "ездок",
            "елей", "елка", "емкость", "енот", "епископ", "ересь", "ерунда", "естество",
            // Ж
            "жаба", "жабра", "жадность", "жажда", "жакет", "жало", "жанр", "жар", "жара", "жаргон",
            "жарка", "жасмин", "жатва", "жатка", "жбан", "жвачка", "жезл", "желе", "железо", "желоб",
            "желток", "желудь", "желчь", "жемчуг", "жена", "жених", "женка", "жердь", "жерло", "жернов",
            "жертва", "жест", "жесть", "жетон", "жжение", "живность", "живот", "живье", "жидкость", "жижа",
            "жизнь", "жила", "жилет", "жилец", "жилка", "жилье", "жир", "жираф", "житель", "житие",
            "жито", "жмот", "жмурки", "жмых", "жница", "жокей", "жонглер", "жребий", "жрец", "жрица",
            "жуир", "жук", "жулик", "журнал", "жуть", "жюри",
            // З
            "забава", "забег", "забой", "забор", "забота", "завал", "завет", "завод", "загар", "загиб",
            "загон", "задание", "задаток", "задача", "задел", "задира", "задник", "задор", "заезд", "зажим",
            "зазор", "заика", "заказ", "закат", "закон", "закуп", "залив", "залог", "замах", "замена",
            "заметка", "замок", "замор", "замша", "замыс", "занос", "запад", "запал", "запас", "запах",
            "запев", "запор", "запрет", "запрос", "заряд", "засад", "засов", "застава", "засуха", "затвор",
            "затея", "затор", "заход", "зачет", "зачин", "заяц", "звание", "звезда", "звено", "зверь",
            "звон", "звук", "здание", "здоровье", "зебра", "зевака", "зелье", "земля", "зенит", "зерно",
            "зефир", "зигзаг", "зима", "зимовье", "злак", "злато", "злоба", "злость", "злыдень", "змей",
            "змея", "знак", "знамя", "знание", "знать", "зной", "зодчий", "зола", "золото", "зомби",
            "зона", "зонт", "зоопарк", "зрачок", "зрение", "зритель", "зуб", "зубец", "зубило", "зубок",
            "зубр", "зуд", "зыбь", "зябь", "зять",
            // И
            "ибис", "ива", "игла", "иго", "игра", "игрок", "идеал", "идея", "идиот", "идол",
            "иена", "иерей", "избыток", "издание", "изгиб", "изгой", "излом", "измена", "износ", "изъян",
            "икона", "икота", "икра", "иллюзия", "ильм", "имам", "имбирь", "имение", "имидж", "имя",
            "инвалид", "индекс", "индус", "инжир", "инок", "интерес", "ипподром", "ирис", "ирод", "искра",
            "ислам", "испуг", "исток", "история", "исход", "итог", "иудей", "ишак",
            // К
            "кабан", "кабель", "кабина", "каблук", "кавалер", "кадет", "кадка", "кадр", "кадык", "казак",
            "казарма", "казна", "казнь", "казус", "кайма", "какао", "калач", "калий", "калина", "калитка",
            "калька", "камень", "камера", "камин", "камыш", "канал", "канат", "канва", "кандид", "канон",
            "кантата", "капитан", "капли", "капля", "каприз", "капрон", "капуста", "караван", "караул", "карета",
            "карий", "карман", "карнавал", "карп", "карта", "картина", "картон", "карьер", "касание", "касатка",
            "касса", "каста", "каталог", "катер", "каток", "катор", "каучук", "кафе", "кафель", "качели",
            "каша", "кашель", "каштан", "каюта", "квадрат", "квартал", "квартира", "кварц", "квас", "квота",
            "кегля", "кедр", "кекс", "келья", "кенгуру", "кепка", "керосин", "кета", "кефаль", "кефир",
            "кибитка", "кивок", "кидала", "кизил", "кий", "кило", "киль", "кинжал", "кино", "киоск",
            "кипа", "кипяток", "кирка", "кирпич", "кисель", "киста", "кисть", "кит", "китель", "кишка",
            "клад", "кладка", "клапан", "класс", "клевер", "клевета", "клей", "клеймо", "клен", "клерк",
            "клетка", "клещ", "клиент", "клизма", "клик", "клика", "климат", "клин", "клиника", "клип",
            "клипса", "клич", "клоака", "клок", "клоп", "клоун", "клуб", "клумба", "клык", "клюв",
            "клюква", "ключ", "клякса", "кляп", "клятва", "кнопка", "кнут", "князь", "коала", "кобра",
            "кобура", "кобыла", "ковбой", "ковер", "ковка", "ковш", "когорта", "кодекс", "кожа", "кожух",
            "коза", "козел", "козни", "козырь", "койка", "кокон", "кокос", "кол", "колба", "колдун",
            "колено", "колесо", "колея", "колибри", "количество", "колокол", "колонна", "колония", "колос", "колосс",
            "колпак", "кольт", "кольцо", "колючка", "коляска", "комар", "комбайн", "комета", "комик", "комиссар",
            "комод", "комок", "компас", "компост", "конвой", "конек", "конец", "конина", "конкурс", "консул",
            "контакт", "контора", "контур", "конура", "конус", "конь", "коньки", "коньяк", "копейка", "копия",
            "копна", "копоть", "копье", "кора", "корабль", "коралл", "корень", "корж", "коридор", "корка",
            "корм", "кормило", "корова", "короб", "корона", "корпус", "корт", "корыто", "корь", "корысть",
            "коса", "косметика", "косметология", "космос", "костер", "кость", "костюм", "косуля", "косынка", "косяк",
            "кот", "котел", "котенок", "котик", "котлета", "котловина", "кофе", "кофта", "кочан", "кочевник",
            "кочерга", "кочка", "кошка", "кошмар", "краб", "крадуч", "краевед", "кража", "крайность", "кран",
            "крапива", "краска", "красота", "кратер", "крах", "креветка", "кредит", "крем", "кремень", "кремль",
            "крен", "крепость", "кресло", "крест", "кретин", "криз", "крик", "криминал", "кристалл", "критик",
            "кровать", "кровля", "кровь", "крой", "кролик", "крона", "кросс", "крот", "кроха", "круг",
            "кружева", "кружка", "кружок", "круиз", "круп", "крупа", "круча", "крыжовник", "крыло", "крыльцо",
            "крыса", "крыша", "крюк", "крючок", "кряж", "ксива", "куб", "кубок", "кувалда", "кувшин",
            "кудри", "кузен", "кузнец", "кузница", "кузов", "кукла", "кукуруза", "кулак", "кулек", "кулинар",
            "кулис", "кулич", "культ", "культура", "кума", "кумир", "кумыс", "кунжут", "купальник", "купе",
            "купец", "купол", "купюра", "курага", "куратор", "курган", "курево", "курица", "куркума", "курок",
            "курорт", "курс", "курсант", "куртка", "курьер", "кусок", "куст", "кустарник", "кусторез", "кутеж",
            "кухня", "куча", "кучер", "кушак", "кушетка",
            // Л
            "лабаз", "лабиринт", "лава", "лавина", "лавка", "лавр", "лагерь", "лагуна", "ладан", "ладонь",
            "ладья", "лаз", "лазарет", "лазейка", "лазер", "лазурь", "лайка", "лайм", "лайнер", "лак",
            "лакей", "лакмус", "лакомство", "лама", "лампа", "ландыш", "ланита", "ланцет", "лань", "лапа",
            "лапоть", "лапша", "ларек", "ларец", "ларь", "ласка", "ласточка", "латунь", "латы", "латынь",
            "лауреат", "лафет", "лачуга", "лебедь", "лев", "левша", "легенда", "легион", "легкие", "лед",
            "леденец", "ледник", "лежак", "лезвие", "лейка", "лекало", "лекарство", "лекарь", "лексика", "лектор",
            "лекция", "лемех", "лемур", "лен", "лента", "лентяй", "лень", "леопард", "лепет", "лепешка",
            "лепка", "лепта", "лес", "леса", "лесник", "лесок", "лесть", "лето", "летопись", "летун",
            "леха", "лечение", "лещ", "ливень", "ливер", "лидер", "лизун", "ликбез", "ликвидация", "ликер",
            "лилия", "лиман", "лимит", "лимон", "лимфа", "линза", "линия", "линкор", "линолеум", "линь",
            "липа", "лира", "лирик", "лирика", "лис", "лиса", "лист", "листва", "литавры", "литер",
            "литр", "литье", "лиф", "лифт", "лихач", "лихва", "лицей", "лицо", "личина", "личинка",
            "лишай", "лишение", "лоб", "лобби", "лобзик", "ловец", "ловля", "ловушка", "логика", "логово",
            "лодка", "лодыжка", "лодырь", "ложа", "ложбина", "ложе", "ложка", "ложь", "лоза", "локатор",
            "локон", "локоть", "лом", "ломбард", "ломка", "ломоть", "лопасть", "лопата", "лопатка", "лопух",
            "лорд", "лосось", "лось", "лосьон", "лот", "лотерея", "лото", "лоток", "лотос", "лоцман",
            "лошадь", "лощина", "лояльность", "луг", "лужа", "лужайка", "лук", "лука", "луковица", "лукошко",
            "луна", "лунка", "лупа", "луч", "лучник", "лыжа", "лыжник", "льгота", "льдина", "льнянка",
            "любитель", "любовник", "любовь", "люд", "люди", "людоед", "люк", "люкс", "люлька", "люстра",
            "лютик", "лютня", "лягушка", "ляжка", "лямка", "ляпис", "ляпсус",
            // М
            "маг", "магазин", "магия", "магма", "магнат", "магнит", "мадам", "мазок", "мазут", "мазь",
            "майка", "майор", "мак", "макака", "макет", "маклер", "максимум", "малец", "малина", "малыш",
            "мальва", "малютка", "маляр", "мама", "мамонт", "манго", "мандат", "мандарин", "манеж", "манера",
            "манжета", "маникюр", "манифест", "манка", "мания", "манок", "мантия", "мануал", "марал", "маразм",
            "марафон", "маргарин", "марево", "маринад", "марка", "маркер", "маркиз", "марля", "мармелад", "марс",
            "март", "марш", "маска", "масло", "масон", "масса", "мастак", "мастер", "масть", "масштаб",
            "мат", "матка", "матрас", "матрос", "матч", "мать", "мафия", "мах", "махина", "махра",
            "мачеха", "мачта", "машина", "маяк", "маятник", "мгла", "мебель", "мед", "медаль", "медведь",
            "медик", "медуза", "медь", "межа", "мезга", "мел", "мелодия", "мелочь", "мель", "мельник",
            "мембрана", "мемуары", "менеджер", "менталитет", "ментол", "меню", "мера", "мерзавец", "мерило", "мерин",
            "мерка", "место", "месть", "месяц", "металл", "метан", "метатель", "метель", "метеор", "метис",
            "метка", "метла", "метод", "метр", "метро", "мех", "механизм", "механик", "меч", "мечеть",
            "мечта", "мешок", "мещанин", "миг", "мигрант", "мигрень", "миграция", "миди", "мизер", "микроб",
            "микрон", "микрофон", "миксер", "милиция", "миллион", "милость", "миля", "мимика", "мина", "минарет",
            "миндаль", "минерал", "минимум", "миниюбка", "минор", "минтай", "минус", "минута", "мир", "мираж",
            "миро", "мирок", "миска", "миссия", "мистер", "мистик", "митинг", "миф", "мишень", "мишка",
            "мишура", "младенец", "млекопитающее", "мнение", "множество", "могила", "мода", "модель", "модем", "модуль",
            "мозаика", "мозг", "мозоль", "мойка", "мокасин", "мокрота", "мол", "молва", "молебен", "молитва",
            "молния", "молодежь", "молодец", "молодость", "молоко", "молот", "молоток", "молох", "молочник", "моль",
            "мольба", "мольберт", "момент", "монарх", "монастырь", "монах", "монета", "монитор", "монолог", "монтаж",
            "мопед", "мопс", "морг", "морда", "море", "моржа", "морковь", "мороженое", "мороз", "морось",
            "морс", "морфий", "моряк", "москит", "мост", "мосток", "мотив", "мото", "моток", "мотор",
            "мотоцикл", "мотыга", "мотылек", "мох", "моча", "мочка", "мошенник", "мошка", "мощность", "мощь",
            "мрак", "мрамор", "мститель", "мудрец", "муж", "мужик", "мужчина", "муза", "музей", "музыка",
            "музыкант", "мука", "мул", "мулат", "мульт", "мумия", "мундир", "мундштук", "муниципалитет", "мура",
            "муравей", "мурашки", "мускат", "мускул", "мусор", "муссон", "мустанг", "мутант", "муть", "муфта",
            "муха", "мухомор", "мученик", "мучение", "мушка", "мушкет", "мыло", "мыс", "мысль", "мытье",
            "мышка", "мышца", "мышь", "мэр", "мэрия", "мюзикл", "мюсли", "мякина", "мякиш", "мякоть",
            "мясник", "мясо", "мята", "мятеж", "мяч", "мячик",
            // Н
            "набат", "набег", "набор", "навес", "навет", "навоз", "навык", "нагар", "награда", "надзор",
            "надой", "наезд", "наем", "нажим", "назад", "наказ", "накал", "накат", "накид", "наклон",
            "налет", "налив", "налим", "налог", "намаз", "намек", "нанос", "напев", "напиток", "напор",
            "направление", "нарзан", "народ", "наряд", "насморк", "наст", "настой", "насыпь", "натиск", "натр",
            "натура", "наука", "нация", "начало", "наяда", "неандерталец", "небеса", "небо", "небоскреб", "невеста",
            "невод", "недруг", "недуг", "нежить", "нектар", "немец", "немощь", "нена", "ненависть", "неон",
            "нерв", "нерест", "нерпа", "несун", "нетопырь", "нефрит", "нефть", "нива", "низ", "низина",
            "никель", "нимб", "нимфа", "ниппель", "нирвана", "нитка", "ниточка", "нить", "нитраты", "ниша",
            "нищий", "новелла", "новизна", "новинка", "новость", "нога", "ноготь", "нож", "ножка", "ножницы",
            "ноздря", "нокаут", "нокдаун", "ноктюрн", "номер", "номинал", "нора", "норд", "норка", "норма",
            "норов", "нос", "носик", "носилки", "носитель", "носка", "носок", "нота", "ноты", "ноутбук",
            "ночлег", "ночник", "ночь", "ноша", "ноябрь", "нрав", "нуга", "нудизм", "нудист", "нужда",
            "нуклон", "нуль", "нумерация", "нутрия", "нутро", "ныра", "нырок", "ньюанс", "нюанс", "нюх", "няня",
            // О
            "оазис", "обвал", "обед", "обелиск", "обет", "обзор", "обида", "обилие", "облако", "обложка",
            "облом", "обман", "обмен", "обморок", "обнова", "обод", "оболочка", "оборона", "оборот", "обочина",
            "обоз", "образ", "образец", "обрез", "обретение", "обрыв", "обряд", "обувь", "обух", "общение",
            "община", "объект", "объем", "обыск", "овал", "оваришь", "овация", "овес", "овод", "овощ",
            "оврага", "овраг", "овца", "овчина", "огарок", "огиба", "оглобля", "огнемет", "огонь", "огород",
            "ограда", "огрех", "огурец", "одежда", "одеколон", "одеяло", "одинец", "одичание", "одурь", "ожог",
            "озеро", "озимь", "озноб", "озон", "оказия", "океан", "окись", "оклад", "оклик", "окно",
            "оковы", "окоп", "окорок", "округа", "округ", "окрас", "оксид", "октава", "окунь", "олень",
            "олива", "олигарх", "олимп", "олово", "ольха", "омар", "омега", "омела", "омет", "омлет",
            "омут", "онанизм", "онемение", "оникс", "опал", "опала", "опара", "опасность", "опека", "опекун",
            "опера", "оперетта", "опий", "опилки", "описание", "оплата", "оплот", "опора", "оппозиция", "оппонент",
            "опрос", "оптик", "оптика", "оптимизм", "оптимист", "опухоль", "опыт", "опьянение", "оракул", "орангутанг",
            "орарь", "орбита", "орган", "орда", "орден", "ордер", "орел", "орех", "ореол", "оригинал",
            "ориентир", "оркестр", "орлан", "орнамент", "оружие", "орхидея", "оса", "осадка", "осадок", "осанка",
            "освоение", "оседлость", "осел", "осень", "осетр", "осина", "осколок", "оскомина", "ослабление", "ослик",
            "осман", "осмос", "основа", "основание", "особа", "особняк", "оспа", "остаток", "остов", "осторожность",
            "остров", "острог", "острота", "ось", "осьминог", "отара", "отбой", "отбор", "отвага", "отвар",
            "ответ", "отвод", "отдача", "отдел", "отдых", "отек", "отель", "отец", "откат", "отклик",
            "откол", "откос", "откуп", "отлив", "отмель", "отпор", "отпрыск", "отпуск", "отрава", "отрасль",
            "отребье", "отрез", "отрезок", "отросток", "отруби", "отрыв", "отрывок", "отряд", "отсек", "отсрочка",
            "оттенок", "оттиск", "отток", "отчаяние", "отчество", "отчет", "отчим", "отшельник", "отщепенец", "отъезд",
            "офис", "офицер", "офорт", "охапка", "охлаждение", "охота", "охотник", "охра", "охрана", "оценка",
            "очаг", "очевидец", "очередь", "очерк", "очко", "ошейник", "ошибка", "ощущение",
            // П
            "павильон", "пагода", "падаль", "падеж", "падение", "паек", "пазуха", "пайка", "пакет", "палас",
            "палата", "палатка", "палач", "палец", "палисадник", "палитра", "палка", "палтус", "палуба", "пальма",
            "пальто", "памятка", "память", "пампа", "панама", "панда", "панель", "паника", "панихида", "панк",
            "панно", "панорама", "пансион", "пантера", "пантомим", "панцирь", "папа", "папаха", "папирус", "папка",
            "пар", "пара", "парад", "парадокс", "паразит", "паралич", "параметр", "парашют", "парень", "парик",
            "парилка", "парк", "парка", "паркет", "парламент", "парник", "парод", "пароль", "паром", "парта",
            "партер", "партизан", "партия", "партнер", "парус", "парча", "парша", "паршь", "паспорт", "пассаж",
            "пассажир", "паста", "пастбище", "пастила", "пастор", "пастух", "пасть", "пасха", "патент", "патока",
            "патриарх", "патриот", "патрон", "патруль", "пауза", "паук", "паутина", "пафос", "пах", "пахарь",
            "пахота", "пациент", "пачка", "паштет", "паяльник", "паяц", "певец", "педаль", "педиатр", "пейджер",
            "пейзаж", "пек", "пекарня", "пеленка", "пельмень", "пемза", "пена", "пенал", "пенек", "пение",
            "пенка", "пенни", "пенс", "пенсия", "пень", "пеньюар", "пепел", "перга", "первенец", "первенство",
            "перевал", "перевод", "перегар", "перегной", "передник", "перекат", "перекос", "перекус", "перелет", "перелом",
            "перемена", "перепел", "перец", "перила", "период", "перл", "перо", "перрон", "персик", "персонаж",
            "персонал", "перчатка", "перьевой", "песец", "песня", "песок", "пестик", "петит", "петля", "петух",
            "петушок", "пехота", "печаль", "печать", "печень", "печка", "печь", "пешеход", "пешка", "пещера",
            "пианино", "пианист", "пиво", "пивовар", "пигмент", "пиджак", "пижама", "пик", "пика", "пикап",
            "пикет", "пикник", "пила", "пилот", "пилюля", "пинг", "пингвин", "пинок", "пинцет", "пион",
            "пионер", "пипетка", "пир", "пирамида", "пират", "пирог", "пирс", "писатель", "писк", "пистолет",
            "письмо", "питание", "питомец", "пихта", "пицца", "пичужка", "пища", "плавка", "плавник", "плакат",
            "пламя", "план", "планер", "планета", "планка", "пласт", "пластика", "пластина", "пластырь", "плат",
            "плата", "платан", "платина", "платок", "платформа", "платье", "плаха", "плац", "плацдарм", "плач",
            "плащ", "плебей", "плева", "плед", "плеер", "племя", "пленка", "пленник", "пленум", "плесень",
            "плеск", "плетень", "плечо", "плешь", "плита", "плитка", "плод", "пломба", "плоскость", "плот",
            "плотва", "плотина", "плотник", "плоть", "площадь", "плуг", "плут", "плюс", "плюш", "пляж",
            "пневматика", "побег", "победа", "побережье", "побои", "поверье", "повесть", "повод", "поводок", "поворот",
            "повязка", "погода", "погон", "погоня", "погреб", "подарок", "подача", "подбор", "подвал", "подвиг",
            "подвода", "подвох", "поддержка", "поделка", "подиум", "подкат", "подкладка", "подлец", "подмога", "поднос",
            "подножие", "подобие", "подогрев", "подол", "подонок", "подошва", "подпись", "подробность", "подросток", "подряд",
            "подсказка", "подсолнух", "подход", "подъезд", "подъем", "поезд", "поездка", "пожар", "позвонок", "поздравление",
            "позитив", "позиция", "познание", "позор", "поиск", "покой", "поколение", "покос", "покров", "покупатель",
            "покупка", "пол", "пола", "полдень", "поле", "полено", "полет", "полив", "полигон", "полимер",
            "полис", "политика", "полк", "полка", "полковник", "полководец", "полнолуние", "полночь", "полоса", "полость",
            "полотенце", "полотно", "полушарие", "полынь", "полюс", "поляна", "поляра", "помада", "помеха", "помещение",
            "помидор", "помин", "помол", "поморье", "помост", "помощник", "помощь", "помпа", "понедельник", "понос",
            "понятие", "поп", "попка", "поправка", "попугай", "порез", "порок", "порода", "порог", "порок",
            "поросль", "порох", "поросенок", "порошок", "порт", "портал", "портер", "портной", "портрет", "портсигар",
            "портфель", "поручение", "поручень", "порция", "порыв", "порядок", "посадка", "посев", "поселок", "посетитель",
            "посланец", "послание", "пословица", "посол", "посох", "пост", "постамент", "постель", "постой", "постриг",
            "поступок", "посуда", "посылка", "пот", "потенциал", "потеря", "потеха", "поток", "потолок", "потомок",
            "потоп", "поход", "почва", "почерк", "почет", "почин", "почка", "почта", "пошлина", "поэзия",
            "поэма", "поэт", "пояс", "правда", "правило", "правитель", "право", "правонарушитель", "праздник", "практика",
            "прапорщик", "прах", "пребывание", "предание", "предатель", "предел", "предки", "предлог", "предмет", "предок",
            "предохранитель", "председатель", "представитель", "представление", "предшественник", "президент", "презрение", "прелесть", "прелюдия", "премия",
            "пренебрежение", "преподаватель", "препятствие", "пресс", "престиж", "престол", "преступление", "преступник", "претендент", "претензия",
            "прибой", "прибор", "прибыль", "привал", "приверженец", "привет", "привилегия", "привкус", "привод", "привычка",
            "приговор", "пригорок", "приз", "признак", "призрак", "призыв", "прикол", "приказ", "прикид", "приклад",
            "прилавок", "прилив", "пример", "примета", "примесь", "принц", "принцесса", "принцип", "принятие", "приоритет",
            "природа", "прирост", "присмотр", "приставка", "пристань", "присяга", "притон", "приток", "притча", "приход",
            "прихожая", "причал", "причина", "причуда", "пришелец", "приют", "проба", "пробег", "пробел", "пробка",
            "пробой", "провал", "провизия", "провинция", "провод", "проводник", "прогноз", "прогресс", "прогулка", "продавец",
            "продажа", "продукт", "проезд", "проект", "прожектор", "проза", "прозвище", "производитель", "производство", "произведение",
            "происхождение", "прок", "прокат", "прокол", "прокурор", "пролет", "пролив", "пролог", "пром", "промах",
            "промежуток", "промысел", "пропаганда", "пропасть", "прополис", "пропуск", "пророк", "прорыв", "просвет", "просек",
            "просо", "простак", "пространство", "простуда", "просьба", "протест", "противник", "протокол", "протон", "профессия",
            "профессор", "профиль", "проход", "процедура", "процент", "процесс", "прочность", "прощение", "пруд", "пружина",
            "прут", "прыжок", "прыщ", "пряжа", "пряжка", "пряник", "прядь", "прялка", "пряность", "псалом",
            "псарня", "псевдоним", "психика", "психолог", "птаха", "птенец", "птица", "птичка", "публика", "публикация",
            "пугало", "пугач", "пудель", "пудра", "пузо", "пузырек", "пузырь", "пук", "пуля", "пульс",
            "пульт", "пума", "пункт", "пуп", "пупок", "пурга", "пуск", "пустота", "пустырь", "пустышка",
            "пустяк", "путаница", "путевка", "путеводитель", "путешественник", "путешествие", "путник", "путы", "путь", "пух",
            "пучина", "пучок", "пушка", "пушок", "пчела", "пчеловод", "пшеница", "пшено", "пылесос", "пыль",
            "пырей", "пытка", "пышка", "пьеса", "пьяница", "пьянка", "пьянство", "пюре", "пядь", "пялки",
            "пята", "пятак", "пятерка", "пятка", "пятно", "пяток", "пятница",
            // Р
            "работа", "работник", "раб", "рабство", "равнина", "радар", "радий", "радио", "радиус", "радость",
            "радуга", "раж", "развал", "развитие", "развод", "разгар", "разговор", "раздел", "раздор", "раздражение",
            "разлив", "разлом", "разлука", "размах", "размен", "размер", "разница", "разнос", "разрез", "разрыв",
            "разряд", "разум", "рай", "район", "рак", "ракета", "ракушка", "рама", "рампа", "рана",
            "ранг", "ранение", "ранец", "раритет", "рас", "раса", "расизм", "расклад", "раскол", "раскоп",
            "раскрой", "расовый", "распад", "распил", "распорядок", "распродажа", "рассада", "рассвет", "расселина", "рассказ",
            "рассмотрение", "рассол", "рассрочка", "расстояние", "рассудок", "расход", "расцвет", "расчет", "расчетка", "расщепление",
            "ратуша", "рать", "раунд", "рацион", "рация", "рвение", "рвота", "реактив", "реактор", "реализм",
            "реальность", "ребенок", "ребро", "ребус", "рев", "реванш", "ревень", "ревизия", "ревматизм", "ревность",
            "револьвер", "революция", "регата", "регби", "регион", "регистр", "регресс", "редактор", "редис", "редкость",
            "редуктор", "редька", "режим", "режиссер", "резак", "резерв", "резец", "резина", "резня", "результат",
            "резус", "резьба", "рейд", "рейка", "рейс", "рейтинг", "река", "реклама", "рекомендация", "рекорд",
            "рекрут", "ректор", "религия", "реликвия", "рельеф", "рельс", "ремень", "ремесло", "ремонт", "рента",
            "репа", "репертуар", "реплика", "репортаж", "репортер", "репрессия", "реприза", "рептилия", "репутация", "ресница",
            "респект", "республика", "ресурс", "рефери", "реферат", "рефлекс", "реформа", "рецензия", "рецепт", "рецидив",
            "речка", "речь", "решение", "решетка", "решимость", "ржавчина", "рис", "риск", "рисунок", "ритм",
            "ритуал", "риф", "рифма", "робот", "ров", "ровесник", "рог", "рогатка", "род", "родина",
            "родинка", "родитель", "родник", "родня", "родословная", "родственник", "рожа", "рожок", "роза", "розга",
            "розетка", "рознь", "розыск", "рой", "рок", "рокер", "рокот", "роль", "роман", "романс",
            "романтизм", "романтик", "ромашка", "ромб", "роса", "роскошь", "рослость", "роспись", "россыпь", "рост",
            "росток", "рот", "рота", "ротор", "рояль", "ртуть", "рубанок", "рубашка", "рубеж", "рубец",
            "рубин", "рубка", "рубль", "рубрика", "руда", "ружье", "руина", "рука", "рукав", "рукавица",
            "руководитель", "руководство", "рукопись", "рулевой", "рулет", "рулон", "руль", "румб", "румын", "румяна",
            "румянец", "руно", "рупор", "русло", "русский", "рутина", "рухлядь", "ручей", "ручка", "рыба",
            "рыбак", "рывок", "рыжик", "рынок", "рысь", "рыцарь", "рычаг", "рюкзак", "рюмка", "ряд",
            "рядовой", "ряженка", "ряса",
            // С
            "саван", "саванна", "сад", "садик", "садовник", "саженец", "сажень", "сазан", "сайт", "саквояж",
            "сакс", "салат", "салон", "салют", "самец", "самка", "самовар", "самолет", "самоубийство", "самурай",
            "санаторий", "сангвиник", "сандалия", "санитар", "санки", "сантим", "сапер", "сапог", "сапфир", "сарай",
            "саранча", "сардина", "сарказм", "сатана", "сатин", "сатира", "сауна", "сафари", "сахар", "сачок",
            "сборник", "сборщик", "сбыт", "свадьба", "сваи", "сварка", "свая", "сведение", "свекла", "свекор",
            "свекровь", "свет", "светило", "светофор", "свеча", "свидание", "свидетель", "свинец", "свинина", "свинка",
            "свинья", "свиристель", "свист", "свита", "свиток", "свобода", "свод", "сводка", "свора", "связка",
            "связь", "святой", "священник", "сгиб", "сгусток", "сдача", "сдвиг", "сделка", "сеанс", "себестоимость",
            "север", "севооборот", "сегмент", "седина", "седло", "седок", "сезон", "сейф", "секрет", "секретарь",
            "секта", "сектор", "секунда", "селедка", "селезень", "селезенка", "селение", "село", "сельдь", "семга",
            "семейство", "семена", "семестр", "семечко", "семинар", "семья", "сена", "сенат", "сенатор", "сени",
            "сено", "сенсация", "сентябрь", "сера", "сердце", "сердцевина", "серебро", "середина", "сережка", "серия",
            "серна", "серп", "серпантин", "серпом", "сертификат", "серьга", "сессия", "сестра", "сетка", "сеть",
            "сечение", "сеялка", "сжатие", "сигара", "сигарета", "сигнал", "сиделка", "сидение", "сила", "силач",
            "силикон", "силос", "силуэт", "символ", "симпатия", "симптом", "симулятор", "симфония", "синагога", "синева",
            "синица", "синоним", "синтез", "синус", "сионизм", "сирена", "сирень", "сироп", "сирота", "система",
            "ситец", "сито", "ситуация", "сифон", "скакун", "скала", "скальп", "скальпель", "скамейка", "скамья",
            "скандал", "сканер", "скарб", "скат", "скатерть", "скафандр", "скачок", "скважина", "сквер", "сквозняк",
            "скелет", "скептик", "скетч", "скидка", "скипетр", "скипидар", "скирда", "склад", "складка", "склеп",
            "склон", "склянка", "скоба", "скобка", "сковорода", "скок", "сколок", "скопление", "скорбь", "скорлупа",
            "скорняк", "скорость", "скорпион", "скот", "скотч", "скрежет", "скрепка", "скрипач", "скрипка", "скромность",
            "скрытность", "скука", "скула", "скульптор", "скульптура", "скумбрия", "скунс", "скупец", "скупость", "слабость",
            "слава", "славянин", "сладость", "слайд", "слалом", "сланец", "след", "следователь", "следствие", "слеза",
            "слепень", "слепок", "слесарь", "слет", "слива", "сливки", "слизь", "слиток", "слово", "слог",
            "слоган", "слоенка", "слой", "слом", "слон", "слоник", "слуга", "служащий", "служба", "слух",
            "случай", "слушатель", "слюна", "слякоть", "смак", "смекалка", "смельчак", "смена", "смерть", "смесь",
            "смета", "сметана", "смех", "смирение", "смог", "смола", "смородина", "смотр", "смута", "смысл",
            "смычок", "снаряд", "снасть", "снег", "снегирь", "снежинка", "снежок", "снимок", "сноб", "сноп",
            "сноровка", "сноха", "снятие", "собака", "собеседник", "соблазн", "соболь", "собор", "собрание", "собственник",
            "собственность", "событие", "сова", "совесть", "совет", "советник", "совещание", "совместимость", "совок", "современник",
            "совхоз", "согласие", "содействие", "содержание", "соединение", "сожаление", "созвездие", "сознание", "сок", "сокол",
            "сократ", "сокровище", "солдат", "соленье", "солидарность", "солист", "солнце", "соло", "солома", "соль",
            "сольфеджио", "соляр", "сом", "сомнение", "сон", "сонет", "соня", "соотечественник", "соотношение", "соперник",
            "сопка", "сопло", "сопрано", "сопротивление", "соприкосновение", "сор", "сорняк", "сорока", "сорт", "сосед",
            "сосиска", "соска", "сосна", "сосок", "состав", "состояние", "сосуд", "сосулька", "сотня", "соус",
            "соучастник", "соха", "социализм", "сочетание", "сочинение", "сочувствие", "союз", "союзник", "спад", "спазм",
            "спальня", "спарринг", "спасатель", "спасение", "спектакль", "спектр", "спекулянт", "сперма", "специалист", "специальность",
            "специя", "спина", "спинка", "спираль", "спирт", "список", "спица", "спичка", "сплав", "сплетня",
            "сплин", "сплочение", "спор", "спорт", "спортсмен", "способ", "способность", "справедливость", "справка", "справочник",
            "спрос", "спрут", "спуск", "спутник", "сравнение", "срам", "среда", "средство", "срез", "срок",
            "сруб", "ссора", "ссуда", "ссылка", "стабильность", "ставень", "ставка", "стадия", "стадо", "стадион",
            "стаж", "стажер", "стакан", "сталь", "стамеска", "стан", "стандарт", "станица", "станок", "станция",
            "старец", "старик", "старина", "старость", "старт", "старуха", "статистика", "статус", "статуя", "статья",
            "стая", "ствол", "створка", "стебель", "стежок", "стезя", "стек", "стекло", "стела", "стелла",
            "стена", "стенд", "стенка", "степень", "степь", "стерва", "стерео", "стержень", "стерлядь", "стиль",
            "стимул", "стипендия", "стирка", "стих", "стихия", "сток", "стол", "столб", "столетие", "столик",
            "столица", "столкновение", "столовая", "столп", "столь", "стон", "стопа", "стопка", "сторож", "сторона",
            "сторонник", "стоянка", "страда", "страдание", "страж", "стража", "страна", "страница", "странник", "странность",
            "страсть", "стратегия", "страус", "страх", "страховка", "стрекоза", "стрела", "стрелец", "стрелка", "стрелок",
            "стремление", "стремя", "стресс", "стриж", "стрижка", "строение", "строитель", "строй", "стройка", "строка",
            "строп", "строфа", "структура", "струна", "струя", "студент", "студия", "стужа", "стук", "стул",
            "ступа", "ступень", "ступня", "стыд", "стык", "стюардесса", "субботник", "субсидия", "субстанция", "субтитр",
            "субъект", "сувенир", "суверенитет", "сугроб", "суд", "судак", "судно", "судорога", "судья", "судьба",
            "сук", "сука", "сукно", "сулема", "султан", "сума", "сумасшедший", "суматоха", "сумерки", "сумка",
            "сумма", "сумрак", "сундук", "суп", "супермаркет", "супруг", "сургуч", "сурок", "суррогат", "сустав",
            "сутки", "суть", "суфле", "суфлер", "суффикс", "сухарь", "сухость", "суша", "сущность", "сфера",
            "сфинкс", "схватка", "схема", "сход", "сходство", "сцена", "сценарий", "счастье", "счет", "счетчик",
            "съезд", "съемка", "сыворотка", "сын", "сыновья", "сыпь", "сыр", "сырец", "сырость", "сырье",
            "сыск", "сытость", "сыщик", "сюжет", "сюрприз", "сюртук",
            // Т
            "табак", "табель", "таблетка", "таблица", "табло", "табор", "табу", "табурет", "тавро", "таз",
            "тайга", "тайм", "таймер", "тайна", "тайник", "тайфун", "такса", "такси", "таксист", "такт",
            "тактика", "талант", "талисман", "талия", "талон", "тальк", "тамада", "тамбур", "танго", "танец",
            "танк", "танкер", "тапка", "тара", "таракан", "таран", "тариф", "тарелка", "татарин", "тать",
            "тахта", "твердь", "тверь", "творец", "творение", "творог", "театр", "тезис", "текст", "текстиль",
            "тектоника", "телега", "теленок", "телескоп", "телефон", "тело", "телятина", "тема", "тембр", "темень",
            "темнота", "темп", "темперамент", "температура", "тенденция", "теневой", "тенор", "тент", "тень", "теория",
            "теплица", "тепло", "теплоход", "терем", "термин", "термит", "термометр", "термос", "терновник", "терпение",
            "террор", "терьер", "теснота", "тесто", "тетерев", "тетива", "тетрадь", "тетя", "техник", "техника",
            "течение", "течь", "теща", "тигр", "тик", "тина", "тип", "типаж", "тираж", "тиран",
            "тире", "титан", "титр", "титул", "тиф", "тишина", "ткань", "ткач", "тление", "товар",
            "товарищ", "тога", "тогда", "тождество", "ток", "токарь", "токсин", "толк", "толкование", "толкотня",
            "толпа", "толстяк", "толчок", "толща", "том", "томат", "тон", "тонна", "тоннель", "тонус",
            "топаз", "топик", "топка", "топливо", "тополь", "топор", "топот", "топь", "торг", "торговец",
            "торговля", "торжество", "тормоз", "торос", "торпеда", "торс", "торт", "торф", "тоска", "тост",
            "тотем", "точка", "точность", "тошнота", "трава", "травма", "трагедия", "традиция", "траектория", "трактат",
            "трактир", "трактор", "трал", "трамвай", "трамплин", "транзит", "транспорт", "траншея", "трап", "трата",
            "траур", "требование", "тревога", "трезвость", "трек", "тренд", "тренер", "тренировка", "трепет", "треск",
            "треска", "трест", "треть", "трефы", "трещина", "три", "трибуна", "тривиальность", "триллер", "трио",
            "триумф", "троица", "тройка", "тролль", "трон", "тропа", "тропик", "трос", "тростник", "тротуар",
            "трофей", "троянец", "труба", "трубка", "труд", "труженик", "труп", "трупп", "труппа", "трус",
            "трусы", "труха", "трущоба", "трюк", "трюм", "трюфель", "тряпка", "трясина", "туалет", "туба",
            "туберкулез", "туго", "туз", "тузик", "тулово", "тулуп", "туман", "тумба", "тундра", "тунец",
            "туника", "тунн", "тупик", "тур", "турбаза", "турбина", "туризм", "турист", "турка", "турне",
            "турнир", "турок", "тусовка", "туча", "туша", "тушь", "тщета", "тыква", "тыл", "тын",
            "тысяча", "тьма", "тюбик", "тюк", "тюлен", "тюлень", "тюльпан", "тюрбан", "тюрьма", "тяга",
            "тягач", "тяготение", "тяжба", "тяжесть",
            // У
            "убежище", "убийство", "убийца", "убор", "уборка", "уборная", "убыток", "уважение", "увалень", "уверенность",
            "увертюра", "увлечение", "угар", "углевод", "угль", "уголек", "уголок", "уголь", "угон", "угорь",
            "угощение", "угроза", "удав", "удар", "удача", "удел", "удержание", "удивление", "удила", "удобрение",
            "удобство", "удовольствие", "удочка", "удушье", "уезд", "уж", "ужас", "ужин", "узда", "уздечка",
            "узел", "узник", "узор", "указ", "указание", "указатель", "указка", "уклад", "уклон", "укол",
            "укор", "укорот", "укроп", "укрытие", "уксус", "улей", "улика", "улитка", "улица", "улов",
            "улыбка", "ультиматум", "ультразвук", "улус", "ульяна", "ум", "умение", "умилование", "уморка", "умысел",
            "универмаг", "университет", "унитаз", "уния", "унция", "упадок", "упаковка", "уплата", "уподобление", "упоминание",
            "упор", "управление", "упражнение", "упрек", "упругость", "упряжка", "упряжь", "ура", "ураган", "уран",
            "урна", "уровень", "урод", "урожай", "урок", "урон", "урчание", "усадьба", "усердие", "усик",
            "усилие", "усилитель", "условие", "услуга", "усмешка", "уснах", "успех", "уста", "усталость", "установка",
            "устав", "устой", "устрица", "устье", "усы", "утварь", "утес", "утеха", "утечка", "утиль",
            "утка", "утконос", "утопия", "уточка", "утрата", "утренник", "утро", "утюг", "ухаб", "ухажер",
            "ухо", "уход", "участие", "участник", "участок", "учащийся", "учеба", "учебник", "ученик", "ученый",
            "учет", "учетчик", "училище", "учитель", "учреждение", "ушанка", "ушиб", "ушко", "ущелье", "ущерб",
            "уют",
            // Ф
            "фабрика", "фабула", "фаворит", "фагот", "фаза", "фазан", "файл", "факел", "факс", "факт",
            "фактор", "фактура", "факультет", "фал", "фаланга", "фалда", "фальсификация", "фальшь", "фамилия", "фан",
            "фанат", "фанатик", "фанера", "фант", "фантазия", "фантастика", "фантик", "фанфара", "фара", "фараон",
            "фарватер", "фарс", "фартук", "фарфор", "фарш", "фас", "фасад", "фасоль", "фасон", "фат",
            "фатум", "фауна", "фаэтон", "февраль", "федерация", "фейерверк", "фельдмаршал", "фельетон", "фен", "феникс",
            "феномен", "феодал", "ферма", "фермент", "фермер", "ферязь", "фестиваль", "фетиш", "фетр", "фехтование",
            "фиалка", "фиаско", "фибра", "фига", "фигура", "физик", "физика", "физиология", "фикус", "фикция",
            "филармония", "филе", "филиал", "филин", "филолог", "философ", "философия", "фильм", "фильтр", "финал",
            "финансист", "финансы", "финик", "финиш", "финка", "финн", "фиорд", "фирма", "фискал", "фитиль",
            "фланг", "фланель", "флаг", "флагман", "флакон", "фланец", "флегма", "флейта", "флигель", "флирт",
            "флокс", "флора", "флот", "флюгер", "флюс", "фляга", "фобия", "фойе", "фокус", "фол",
            "фолиант", "фольга", "фольклор", "фон", "фонарь", "фонд", "фонема", "фонетика", "фонтан", "форель",
            "форма", "формат", "формула", "форпост", "форс", "форсунка", "форт", "фортепиано", "фортуна", "форум",
            "фосфор", "фото", "фотография", "фрагмент", "фраза", "фрак", "фракция", "франк", "француз", "фреза",
            "фреска", "фривольность", "фрикаделька", "фронт", "фрукт", "фтор", "фуга", "фужер", "фундамент", "фунт",
            "фура", "фураж", "фуражка", "фургон", "фурор", "фут", "футбол", "футболист", "футболка", "футляр",
            "фуфайка", "фыркание",
            // Х
            "хаки", "халат", "халва", "халиф", "халтура", "хам", "хамелеон", "хан", "хандра", "ханжа",
            "хаос", "характер", "харизма", "хариус", "харя", "хата", "хвала", "хватка", "хвойня", "хворост",
            "хвост", "хвоя", "хек", "херес", "хижина", "хилость", "химера", "химик", "химия", "хина",
            "хинди", "хиппи", "хирург", "хит", "хитрец", "хитрость", "хищник", "хлам", "хлеб", "хлебороб",
            "хлев", "хлопец", "хлопок", "хлопоты", "хлопушка", "хлопья", "хлор", "хлыст", "хмель", "хмурь",
            "хна", "хобби", "хобот", "ход", "ходатай", "ходок", "ходули", "хоз", "хозяин", "хозяйка",
            "хозяйство", "хоккей", "холера", "холл", "холм", "холод", "холоп", "холост", "холст", "хомут",
            "хор", "хорда", "хорек", "хорист", "хоровод", "хоромы", "хорошо", "хорь", "хоспис", "хохма",
            "хохол", "хохот", "храбрец", "храм", "хранение", "храп", "хрен", "хрип", "хроника", "хроникер",
            "хрусталь", "хруст", "хрущ", "хрыч", "хрящ", "хула", "хулиган", "хурма", "хутор",
            // Ц
            "царапина", "царевич", "царство", "царь", "цвет", "цветник", "цветок", "цедра", "целина", "целитель",
            "целое", "целость", "цель", "цемент", "цена", "цензор", "цензура", "ценитель", "ценник", "ценность",
            "центнер", "центр", "цепочка", "цепь", "церемония", "церковь", "цех", "цибуля", "цивилизация", "цикл",
            "циклон", "цилиндр", "цинизм", "циник", "цинк", "цирк", "циркач", "циркуль", "цирюльник", "цистерна",
            "цитадель", "цитата", "цитрус", "циферблат", "цифра", "цоколь", "цукат", "цыган", "цыпленок",
            // Ч
            "чабан", "чабрец", "чад", "чадо", "чай", "чайка", "чайник", "чалма", "чан", "чара",
            "чардаш", "чарка", "чародей", "чары", "час", "часовня", "часовой", "часок", "частица", "частное",
            "частность", "частота", "часть", "часы", "чаша", "чаща", "чащоба", "чаяние", "чебурек", "чей",
            "чек", "чекан", "чекист", "челн", "челнок", "чело", "человек", "челюсть", "чемодан", "чемпион",
            "чепец", "чепуха", "чепчик", "червь", "чердак", "череда", "черед", "череп", "черепаха", "черепица",
            "черешня", "черника", "чернила", "чернослив", "чернота", "черноземье", "черт", "черта", "чертеж", "чертог",
            "чертополох", "черточка", "чеснок", "честность", "честь", "чета", "четверг", "четверка", "четверть", "четкость",
            "чех", "чехол", "чечевица", "чешуя", "чиж", "чин", "чиновник", "чип", "чирей", "число",
            "чистка", "чистота", "читатель", "чих", "член", "чмоканье", "чок", "чопорность", "чревоугодие", "чрево",
            "чтение", "чтец", "чувство", "чугун", "чудак", "чудеса", "чудо", "чудовище", "чужак", "чужбина",
            "чукча", "чулан", "чулок", "чум", "чума", "чумак", "чурбан", "чуткость", "чутье", "чучело",
            "чушь",
            // Ш
            "шаблон", "шавка", "шаг", "шайба", "шайка", "шакал", "шалаш", "шале", "шалость", "шаль",
            "шалун", "шаман", "шампанское", "шампиньон", "шампунь", "шанс", "шантаж", "шапка", "шар", "шарада",
            "шарж", "шарик", "шарлатан", "шарм", "шарманка", "шарф", "шасси", "шатен", "шатер", "шатия",
            "шатун", "шафер", "шафран", "шах", "шахматы", "шахта", "шашка", "шашки", "шашлык", "швабра",
            "швартовка", "швед", "швея", "шворень", "шедевр", "шезлонг", "шейка", "шейх", "шелест", "шелк",
            "шелуха", "шельма", "шельф", "шепот", "шептун", "шеренга", "шериф", "шерсть", "шершень", "шест",
            "шестерка", "шестерня", "шесток", "шеф", "шея", "шиворот", "шизофрения", "шик", "шикарность", "шило",
            "шимпанзе", "шина", "шинель", "шиповник", "шипучка", "ширина", "ширма", "широта", "шифер", "шифон",
            "шифр", "шишка", "шкала", "шкатулка", "шкаф", "шквал", "шкив", "школа", "школьник", "шкура",
            "шлагбаум", "шлак", "шланг", "шлейф", "шлем", "шлепанцы", "шлифовка", "шлюз", "шлюпка", "шляпа",
            "шмель", "шницель", "шнур", "шнурок", "шов", "шовинизм", "шок", "шоколад", "шомпол", "шорох",
            "шорты", "шоссе", "шотландец", "шофер", "шпага", "шпажист", "шпаклевка", "шпала", "шпана", "шпаргалка",
            "шпатель", "шпик", "шпилька", "шпинат", "шпион", "шпора", "шприц", "шпроты", "шпулька", "шпунт",
            "шрам", "шрапнель", "шрифт", "штаб", "штабель", "штамм", "штамп", "штанга", "штаны", "штат",
            "штатив", "штиль", "штифт", "шток", "штольня", "штопка", "штопор", "штора", "шторм", "штраф",
            "штрек", "штрих", "штука", "штукатурка", "штурвал", "штурм", "штурман", "штык", "шуба", "шулер",
            "шум", "шумиха", "шурин", "шуруп", "шут", "шутка", "шхуна", "щавель", "щадь",
            // Щ
            "щебень", "щебет", "щегол", "щедрость", "щека", "щекотка", "щель", "щенок", "щепка", "щепотка",
            "щетина", "щетка", "щи", "щиколотка", "щипцы", "щит", "щиток", "щука", "щуп", "щупальце",
            "щур",
            // Э
            "эволюция", "эгоизм", "эгоист", "экватор", "эквивалент", "экзамен", "экземпляр", "экзотика", "экипаж", "эклер",
            "эколог", "экология", "экономика", "экономист", "экономия", "экран", "экскурсия", "эксперимент", "эксперт", "экспертиза",
            "эксплуатация", "экспозиция", "экспонат", "экспорт", "экспресс", "экстаз", "экстракт", "экстремизм", "эластик", "элеватор",
            "элегия", "электрик", "электрод", "электрон", "элемент", "элита", "эллипс", "эмаль", "эмблема", "эмбрион",
            "эмигрант", "эмиссия", "эмоция", "энергия", "энтузиазм", "энциклопедия", "эпидемия", "эпизод", "эпилог", "эпитет",
            "эпопея", "эпос", "эпоха", "эра", "эрозия", "эрудит", "эрудиция", "эскадра", "эскалатор", "эскиз",
            "эскорт", "эссе", "эстафета", "эстетика", "эстрада", "этаж", "этап", "этика", "этикет", "этикетка",
            "этнос", "эхо", "эшафот", "эшелон",
            // Ю
            "юань", "юбилей", "юбка", "ювелир", "юг", "юдоль", "южанин", "юмор", "юморист", "юнга",
            "юнец", "юниор", "юнкер", "юность", "юноша", "юнтатив", "юпитер", "юрист", "юркость", "юродивый",
            "юрта", "юстиция", "ютуб",
            // Я
            "яблоко", "яблоня", "явка", "явление", "ягнёнок", "ягода", "яд", "ядро", "язва", "язык",
            "яйцо", "якорь", "якут", "ялик", "яма", "ямщик", "янки", "январь", "янтарь", "японец",
            "ярд", "яркость", "ярлык", "ярмарка", "ярмо", "ярость", "ярус", "ясень", "ясли", "ясновидец",
            "ясность", "ястреб", "яхонт", "яхта", "ячейка", "ячмень", "яшма", "ящер", "ящик"
        ];

        // Filter to exactly 5 letters and deduplicate
        const VALID_WORDS = [...new Set(WORDS.filter(w => w.length === 5))];

        // Game state
        let currentWord = '';
        let currentRow = 0;
        let currentTile = 0;
        let gameOver = false;
        let gameMode = 'daily';
        let guesses = [];
        let keyStates = {};

        // Russian keyboard layout
        const KEYBOARD_ROWS = [
            ['й', 'ц', 'у', 'к', 'е', 'н', 'г', 'ш', 'щ', 'з', 'х', 'ъ'],
            ['ф', 'ы', 'в', 'а', 'п', 'р', 'о', 'л', 'д', 'ж', 'э'],
            ['⌫', 'я', 'ч', 'с', 'м', 'и', 'т', 'ь', 'б', 'ю', '⏎']
        ];

        // Initialize Telegram WebApp
        const tg = window.Telegram?.WebApp;
        if (tg) {
            tg.ready();
            tg.expand();
            if (tg.colorScheme === 'dark') {
                document.body.classList.add('dark-theme');
            }
        }

        // Get word of the day based on date
        function getDailyWord() {
            const today = new Date();
            const seed = today.getFullYear() * 10000 + (today.getMonth() + 1) * 100 + today.getDate();
            const index = seed % VALID_WORDS.length;
            return VALID_WORDS[index];
        }

        // Get random word
        function getRandomWord() {
            return VALID_WORDS[Math.floor(Math.random() * VALID_WORDS.length)];
        }

        // Initialize game board
        function initBoard() {
            const board = document.getElementById('board');
            board.innerHTML = '';
            for (let i = 0; i < 6; i++) {
                const row = document.createElement('div');
                row.className = 'row';
                for (let j = 0; j < 5; j++) {
                    const tile = document.createElement('div');
                    tile.className = 'tile';
                    tile.id = `tile-${i}-${j}`;
                    row.appendChild(tile);
                }
                board.appendChild(row);
            }
        }

        // Hidden input element
        const hiddenInput = document.getElementById('hiddenInput');
        const tapHint = document.getElementById('tapHint');

        // Focus input to show device keyboard
        function focusInput() {
            if (!gameOver) {
                hiddenInput.focus();
                tapHint.classList.add('hidden');
            }
        }

        // Handle hidden input
        hiddenInput.addEventListener('input', (e) => {
            const value = e.target.value;
            if (value.length > 0) {
                const lastChar = value[value.length - 1].toLowerCase();
                const russianKeys = 'йцукенгшщзхъфывапролджэячсмитьбюё';
                if (russianKeys.includes(lastChar)) {
                    handleKey(lastChar === 'ё' ? 'е' : lastChar);
                }
                hiddenInput.value = '';
            }
        });

        hiddenInput.addEventListener('keydown', (e) => {
            if (e.key === 'Backspace') {
                e.preventDefault();
                handleKey('⌫');
            } else if (e.key === 'Enter') {
                e.preventDefault();
                handleKey('⏎');
            }
        });

        hiddenInput.addEventListener('blur', () => {
            if (!gameOver) {
                tapHint.classList.remove('hidden');
            }
        });

        // Initialize keyboard (status display only)
        function initKeyboard() {
            const keyboard = document.getElementById('keyboard');
            keyboard.innerHTML = '';
            KEYBOARD_ROWS.forEach(row => {
                const rowDiv = document.createElement('div');
                rowDiv.className = 'keyboard-row';
                row.forEach(key => {
                    const keyBtn = document.createElement('button');
                    keyBtn.className = 'key';
                    if (key === '⌫' || key === '⏎') {
                        keyBtn.classList.add('wide');
                    }
                    keyBtn.textContent = key;
                    keyBtn.id = `key-${key}`;
                    // Tap on keyboard also focuses input (for convenience)
                    keyBtn.addEventListener('click', (e) => {
                        e.preventDefault();
                        focusInput();
                    });
                    rowDiv.appendChild(keyBtn);
                });
                keyboard.appendChild(rowDiv);
            });
        }

        // Handle key press
        function handleKey(key) {
            if (gameOver) return;

            if (key === '⌫') {
                deleteLetter();
            } else if (key === '⏎') {
                submitGuess();
            } else {
                addLetter(key);
            }
        }

        // Add letter to current position
        function addLetter(letter) {
            if (currentTile < 5) {
                const tile = document.getElementById(`tile-${currentRow}-${currentTile}`);
                tile.textContent = letter;
                tile.classList.add('filled');
                guesses[currentRow] = (guesses[currentRow] || '') + letter;
                currentTile++;
            }
        }

        // Delete last letter
        function deleteLetter() {
            if (currentTile > 0) {
                currentTile--;
                const tile = document.getElementById(`tile-${currentRow}-${currentTile}`);
                tile.textContent = '';
                tile.classList.remove('filled');
                guesses[currentRow] = guesses[currentRow].slice(0, -1);
            }
        }

        // Submit guess
        function submitGuess() {
            if (currentTile !== 5) {
                showMessage('Введите 5 букв');
                shakeRow();
                return;
            }

            const guess = guesses[currentRow];

            if (!VALID_WORDS.includes(guess)) {
                showMessage('Слова нет в словаре');
                shakeRow();
                return;
            }

            revealTiles(guess);
        }

        // Reveal tiles with animation
        function revealTiles(guess) {
            const letterCount = {};
            for (const letter of currentWord) {
                letterCount[letter] = (letterCount[letter] || 0) + 1;
            }

            const results = Array(5).fill('absent');

            // First pass: mark correct letters
            for (let i = 0; i < 5; i++) {
                if (guess[i] === currentWord[i]) {
                    results[i] = 'correct';
                    letterCount[guess[i]]--;
                }
            }

            // Second pass: mark present letters
            for (let i = 0; i < 5; i++) {
                if (results[i] !== 'correct' && letterCount[guess[i]] > 0) {
                    results[i] = 'present';
                    letterCount[guess[i]]--;
                }
            }

            // Animate tiles
            for (let i = 0; i < 5; i++) {
                setTimeout(() => {
                    const tile = document.getElementById(`tile-${currentRow}-${i}`);
                    tile.classList.add('reveal', results[i]);

                    // Update keyboard
                    updateKeyboard(guess[i], results[i]);
                }, i * 300);
            }

            setTimeout(() => {
                if (guess === currentWord) {
                    gameOver = true;
                    showModal(true);
                    if (tg) {
                        tg.HapticFeedback?.notificationOccurred('success');
                    }
                } else if (currentRow === 5) {
                    gameOver = true;
                    showModal(false);
                    if (tg) {
                        tg.HapticFeedback?.notificationOccurred('error');
                    }
                } else {
                    currentRow++;
                    currentTile = 0;
                }
            }, 1500);
        }

        // Update keyboard colors
        function updateKeyboard(letter, state) {
            const key = document.getElementById(`key-${letter}`);
            if (!key) return;

            const priority = { 'absent': 0, 'present': 1, 'correct': 2 };
            const currentState = keyStates[letter];

            if (!currentState || priority[state] > priority[currentState]) {
                keyStates[letter] = state;
                key.className = 'key ' + state;
            }
        }

        // Show message
        function showMessage(text) {
            const message = document.getElementById('message');
            message.textContent = text;
            message.classList.add('show');
            setTimeout(() => message.classList.remove('show'), 2000);
            if (tg) {
                tg.HapticFeedback?.notificationOccurred('warning');
            }
        }

        // Shake current row
        function shakeRow() {
            for (let i = 0; i < 5; i++) {
                const tile = document.getElementById(`tile-${currentRow}-${i}`);
                tile.classList.add('shake');
                setTimeout(() => tile.classList.remove('shake'), 500);
            }
        }

        // Show end game modal
        function showModal(won) {
            const overlay = document.getElementById('modalOverlay');
            const title = document.getElementById('modalTitle');
            const text = document.getElementById('modalText');
            const word = document.getElementById('modalWord');
            const btn = document.getElementById('modalBtn');
            const nextInfo = document.getElementById('nextWordInfo');

            // Load stats
            const stats = loadStats();
            stats.played++;
            if (won) {
                stats.won++;
                stats.streak++;
            } else {
                stats.streak = 0;
            }
            saveStats(stats);

            document.getElementById('statPlayed').textContent = stats.played;
            document.getElementById('statWon').textContent = stats.won;
            document.getElementById('statStreak').textContent = stats.streak;

            title.textContent = won ? 'Победа!' : 'Не угадали';
            text.textContent = won ? `Вы угадали за ${currentRow + 1} ${getAttemptWord(currentRow + 1)}!` : 'Загаданное слово:';
            word.textContent = currentWord.toUpperCase();

            if (gameMode === 'daily') {
                btn.textContent = 'Случайное слово';
                btn.onclick = () => {
                    closeModal();
                    setMode('random');
                };
                nextInfo.textContent = 'Новое слово дня появится завтра';
            } else {
                btn.textContent = 'Играть ещё';
                btn.onclick = () => {
                    closeModal();
                    startGame();
                };
                nextInfo.textContent = '';
            }

            overlay.classList.add('show');
        }

        function closeModal() {
            document.getElementById('modalOverlay').classList.remove('show');
        }

        function getAttemptWord(n) {
            if (n === 1) return 'попытку';
            if (n >= 2 && n <= 4) return 'попытки';
            return 'попыток';
        }

        // Stats management
        function loadStats() {
            const saved = localStorage.getItem('wordle-ru-stats');
            return saved ? JSON.parse(saved) : { played: 0, won: 0, streak: 0 };
        }

        function saveStats(stats) {
            localStorage.setItem('wordle-ru-stats', JSON.stringify(stats));
        }

        // Set game mode
        function setMode(mode) {
            gameMode = mode;
            document.getElementById('dailyBtn').classList.toggle('active', mode === 'daily');
            document.getElementById('randomBtn').classList.toggle('active', mode === 'random');
            startGame();
        }

        // Start new game
        function startGame() {
            currentWord = gameMode === 'daily' ? getDailyWord() : getRandomWord();
            currentRow = 0;
            currentTile = 0;
            gameOver = false;
            guesses = [];
            keyStates = {};

            initBoard();
            initKeyboard();

            // Check if daily game was already played today
            if (gameMode === 'daily') {
                const today = new Date().toDateString();
                const lastPlayed = localStorage.getItem('wordle-ru-last-daily');
                const savedGame = localStorage.getItem('wordle-ru-daily-state');

                if (lastPlayed === today && savedGame) {
                    const state = JSON.parse(savedGame);
                    restoreGame(state);
                }
            }
        }

        // Restore saved game state
        function restoreGame(state) {
            state.guesses.forEach((guess, rowIndex) => {
                currentRow = rowIndex;
                for (let i = 0; i < guess.length; i++) {
                    currentTile = i;
                    addLetter(guess[i]);
                }
                currentTile = 5;

                // Reveal without animation
                const letterCount = {};
                for (const letter of currentWord) {
                    letterCount[letter] = (letterCount[letter] || 0) + 1;
                }

                const results = Array(5).fill('absent');
                for (let i = 0; i < 5; i++) {
                    if (guess[i] === currentWord[i]) {
                        results[i] = 'correct';
                        letterCount[guess[i]]--;
                    }
                }
                for (let i = 0; i < 5; i++) {
                    if (results[i] !== 'correct' && letterCount[guess[i]] > 0) {
                        results[i] = 'present';
                        letterCount[guess[i]]--;
                    }
                }

                for (let i = 0; i < 5; i++) {
                    const tile = document.getElementById(`tile-${rowIndex}-${i}`);
                    tile.classList.add(results[i]);
                    updateKeyboard(guess[i], results[i]);
                }
            });

            currentRow = state.guesses.length;
            currentTile = 0;
            guesses = state.guesses;

            if (state.gameOver) {
                gameOver = true;
            }
        }

        // Save game state
        function saveGameState() {
            if (gameMode === 'daily') {
                const state = { guesses, gameOver };
                localStorage.setItem('wordle-ru-daily-state', JSON.stringify(state));
                localStorage.setItem('wordle-ru-last-daily', new Date().toDateString());
            }
        }

        // Physical keyboard support (fallback for desktop)
        document.addEventListener('keydown', (e) => {
            if (gameOver) return;
            // Only handle if not focused on hidden input (desktop fallback)
            if (document.activeElement !== hiddenInput) {
                const key = e.key.toLowerCase();
                const russianKeys = 'йцукенгшщзхъфывапролджэячсмитьбюё';

                if (russianKeys.includes(key)) {
                    handleKey(key === 'ё' ? 'е' : key);
                } else if (key === 'backspace') {
                    handleKey('⌫');
                } else if (key === 'enter') {
                    handleKey('⏎');
                }
            }
        });

        // Auto-save on state change
        const originalRevealTiles = revealTiles;
        revealTiles = function(guess) {
            originalRevealTiles(guess);
            setTimeout(saveGameState, 1600);
        };

        // Initialize
        initBoard();
        initKeyboard();
        startGame();

        // Auto-focus on mobile after a short delay
        setTimeout(() => {
            if ('ontouchstart' in window) {
                tapHint.classList.remove('hidden');
            } else {
                tapHint.classList.add('hidden');
            }
        }, 100);

        // Theme detection
        if (window.matchMedia) {
            const darkModeQuery = window.matchMedia('(prefers-color-scheme: dark)');
            if (darkModeQuery.matches && !tg) {
                document.body.classList.add('dark-theme');
            }
            darkModeQuery.addEventListener('change', (e) => {
                if (!tg) {
                    document.body.classList.toggle('dark-theme', e.matches);
                }
            });
        }
    </script>
</body>
</html>
